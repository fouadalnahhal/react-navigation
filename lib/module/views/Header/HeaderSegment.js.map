{"version":3,"names":["getDefaultHeaderHeight","Header","HeaderBackButton","HeaderTitle","React","Platform","StyleSheet","memoize","HeaderSegment","props","leftLabelLayout","setLeftLabelLayout","useState","undefined","titleLayout","setTitleLayout","handleTitleLayout","e","height","width","nativeEvent","layout","handleLeftLabelLayout","getInterpolatedStyle","styleInterpolator","current","next","headerHeight","progress","layouts","header","screen","title","leftLabel","modal","onGoBack","headerTitle","headerLeft","left","headerRight","right","headerBackImage","headerBackTitle","headerBackTitleVisible","OS","headerTruncatedBackTitle","headerBackAccessibilityLabel","headerBackTestID","headerBackAllowFontScaling","headerBackTitleStyle","headerTitleContainerStyle","headerLeftContainerStyle","headerRightContainerStyle","headerBackgroundContainerStyle","headerStyle","customHeaderStyle","headerStatusBarHeight","rest","defaultHeight","flatten","titleStyle","leftButtonStyle","leftLabelStyle","rightButtonStyle","backgroundStyle","backImage","accessibilityLabel","testID","allowFontScaling","onPress","label","truncatedLabel","labelStyle","onLabelLayout","screenLayout","canGoBack","Boolean","onLayout"],"sources":["HeaderSegment.tsx"],"sourcesContent":["import {\r\n  getDefaultHeaderHeight,\r\n  Header,\r\n  HeaderBackButton,\r\n  HeaderBackButtonProps,\r\n  HeaderTitle,\r\n} from '@react-navigation/elements';\r\nimport * as React from 'react';\r\nimport {\r\n  Animated,\r\n  LayoutChangeEvent,\r\n  Platform,\r\n  StyleSheet,\r\n  ViewStyle,\r\n} from 'react-native';\r\n\r\nimport type {\r\n  Layout,\r\n  SceneProgress,\r\n  StackHeaderOptions,\r\n  StackHeaderStyleInterpolator,\r\n} from '../../types';\r\nimport memoize from '../../utils/memoize';\r\n\r\ntype Props = Omit<StackHeaderOptions, 'headerStatusBarHeight'> & {\r\n  headerStatusBarHeight: number;\r\n  layout: Layout;\r\n  title: string;\r\n  modal: boolean;\r\n  onGoBack?: () => void;\r\n  progress: SceneProgress;\r\n  styleInterpolator: StackHeaderStyleInterpolator;\r\n};\r\n\r\nexport default function HeaderSegment(props: Props) {\r\n  const [leftLabelLayout, setLeftLabelLayout] = React.useState<\r\n    Layout | undefined\r\n  >(undefined);\r\n\r\n  const [titleLayout, setTitleLayout] = React.useState<Layout | undefined>(\r\n    undefined\r\n  );\r\n\r\n  const handleTitleLayout = (e: LayoutChangeEvent) => {\r\n    const { height, width } = e.nativeEvent.layout;\r\n\r\n    setTitleLayout((titleLayout) => {\r\n      if (\r\n        titleLayout &&\r\n        height === titleLayout.height &&\r\n        width === titleLayout.width\r\n      ) {\r\n        return titleLayout;\r\n      }\r\n\r\n      return { height, width };\r\n    });\r\n  };\r\n\r\n  const handleLeftLabelLayout = (e: LayoutChangeEvent) => {\r\n    const { height, width } = e.nativeEvent.layout;\r\n\r\n    if (\r\n      leftLabelLayout &&\r\n      height === leftLabelLayout.height &&\r\n      width === leftLabelLayout.width\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setLeftLabelLayout({ height, width });\r\n  };\r\n\r\n  const getInterpolatedStyle = memoize(\r\n    (\r\n      styleInterpolator: StackHeaderStyleInterpolator,\r\n      layout: Layout,\r\n      current: Animated.AnimatedInterpolation,\r\n      next: Animated.AnimatedInterpolation | undefined,\r\n      titleLayout: Layout | undefined,\r\n      leftLabelLayout: Layout | undefined,\r\n      headerHeight: number\r\n    ) =>\r\n      styleInterpolator({\r\n        current: { progress: current },\r\n        next: next && { progress: next },\r\n        layouts: {\r\n          header: {\r\n            height: headerHeight,\r\n            width: layout.width,\r\n          },\r\n          screen: layout,\r\n          title: titleLayout,\r\n          leftLabel: leftLabelLayout,\r\n        },\r\n      })\r\n  );\r\n\r\n  const {\r\n    progress,\r\n    layout,\r\n    modal,\r\n    onGoBack,\r\n    headerTitle: title,\r\n    headerLeft: left = onGoBack\r\n      ? (props: HeaderBackButtonProps) => <HeaderBackButton {...props} />\r\n      : undefined,\r\n    headerRight: right,\r\n    headerBackImage,\r\n    headerBackTitle,\r\n    headerBackTitleVisible = Platform.OS === 'ios',\r\n    headerTruncatedBackTitle,\r\n    headerBackAccessibilityLabel,\r\n    headerBackTestID,\r\n    headerBackAllowFontScaling,\r\n    headerBackTitleStyle,\r\n    headerTitleContainerStyle,\r\n    headerLeftContainerStyle,\r\n    headerRightContainerStyle,\r\n    headerBackgroundContainerStyle,\r\n    headerStyle: customHeaderStyle,\r\n    headerStatusBarHeight,\r\n    styleInterpolator,\r\n    ...rest\r\n  } = props;\r\n\r\n  const defaultHeight = getDefaultHeaderHeight(\r\n    layout,\r\n    modal,\r\n    headerStatusBarHeight\r\n  );\r\n\r\n  const { height = defaultHeight } = StyleSheet.flatten(\r\n    customHeaderStyle || {}\r\n  ) as ViewStyle;\r\n\r\n  const {\r\n    titleStyle,\r\n    leftButtonStyle,\r\n    leftLabelStyle,\r\n    rightButtonStyle,\r\n    backgroundStyle,\r\n  } = getInterpolatedStyle(\r\n    styleInterpolator,\r\n    layout,\r\n    progress.current,\r\n    progress.next,\r\n    titleLayout,\r\n    headerBackTitle ? leftLabelLayout : undefined,\r\n    typeof height === 'number' ? height : defaultHeight\r\n  );\r\n\r\n  const headerLeft: StackHeaderOptions['headerLeft'] = left\r\n    ? (props) =>\r\n        left({\r\n          ...props,\r\n          backImage: headerBackImage,\r\n          accessibilityLabel: headerBackAccessibilityLabel,\r\n          testID: headerBackTestID,\r\n          allowFontScaling: headerBackAllowFontScaling,\r\n          onPress: onGoBack,\r\n          label: headerBackTitle,\r\n          truncatedLabel: headerTruncatedBackTitle,\r\n          labelStyle: [leftLabelStyle, headerBackTitleStyle],\r\n          onLabelLayout: handleLeftLabelLayout,\r\n          screenLayout: layout,\r\n          titleLayout,\r\n          canGoBack: Boolean(onGoBack),\r\n        })\r\n    : undefined;\r\n\r\n  const headerRight: StackHeaderOptions['headerRight'] = right\r\n    ? (props) =>\r\n        right({\r\n          ...props,\r\n          canGoBack: Boolean(onGoBack),\r\n        })\r\n    : undefined;\r\n\r\n  const headerTitle: StackHeaderOptions['headerTitle'] =\r\n    typeof title !== 'function'\r\n      ? (props) => <HeaderTitle {...props} onLayout={handleTitleLayout} />\r\n      : (props) => title({ ...props, onLayout: handleTitleLayout });\r\n\r\n  return (\r\n    <Header\r\n      modal={modal}\r\n      layout={layout}\r\n      headerTitle={headerTitle}\r\n      headerLeft={headerLeft}\r\n      headerLeftLabelVisible={headerBackTitleVisible}\r\n      headerRight={headerRight}\r\n      headerTitleContainerStyle={[titleStyle, headerTitleContainerStyle]}\r\n      headerLeftContainerStyle={[leftButtonStyle, headerLeftContainerStyle]}\r\n      headerRightContainerStyle={[rightButtonStyle, headerRightContainerStyle]}\r\n      headerBackgroundContainerStyle={[\r\n        backgroundStyle,\r\n        headerBackgroundContainerStyle,\r\n      ]}\r\n      headerStyle={customHeaderStyle}\r\n      headerStatusBarHeight={headerStatusBarHeight}\r\n      {...rest}\r\n    />\r\n  );\r\n}\r\n"],"mappings":"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"}