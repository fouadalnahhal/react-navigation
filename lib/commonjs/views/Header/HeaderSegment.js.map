{"version":3,"names":["HeaderSegment","props","leftLabelLayout","setLeftLabelLayout","React","useState","undefined","titleLayout","setTitleLayout","handleTitleLayout","e","height","width","nativeEvent","layout","handleLeftLabelLayout","getInterpolatedStyle","memoize","styleInterpolator","current","next","headerHeight","progress","layouts","header","screen","title","leftLabel","modal","onGoBack","headerTitle","headerLeft","left","headerRight","right","headerBackImage","headerBackTitle","headerBackTitleVisible","Platform","OS","headerTruncatedBackTitle","headerBackAccessibilityLabel","headerBackTestID","headerBackAllowFontScaling","headerBackTitleStyle","headerTitleContainerStyle","headerLeftContainerStyle","headerRightContainerStyle","headerBackgroundContainerStyle","headerStyle","customHeaderStyle","headerStatusBarHeight","rest","defaultHeight","getDefaultHeaderHeight","StyleSheet","flatten","titleStyle","leftButtonStyle","leftLabelStyle","rightButtonStyle","backgroundStyle","backImage","accessibilityLabel","testID","allowFontScaling","onPress","label","truncatedLabel","labelStyle","onLabelLayout","screenLayout","canGoBack","Boolean","onLayout"],"sources":["HeaderSegment.tsx"],"sourcesContent":["import {\r\n  getDefaultHeaderHeight,\r\n  Header,\r\n  HeaderBackButton,\r\n  HeaderBackButtonProps,\r\n  HeaderTitle,\r\n} from '@react-navigation/elements';\r\nimport * as React from 'react';\r\nimport {\r\n  Animated,\r\n  LayoutChangeEvent,\r\n  Platform,\r\n  StyleSheet,\r\n  ViewStyle,\r\n} from 'react-native';\r\n\r\nimport type {\r\n  Layout,\r\n  SceneProgress,\r\n  StackHeaderOptions,\r\n  StackHeaderStyleInterpolator,\r\n} from '../../types';\r\nimport memoize from '../../utils/memoize';\r\n\r\ntype Props = Omit<StackHeaderOptions, 'headerStatusBarHeight'> & {\r\n  headerStatusBarHeight: number;\r\n  layout: Layout;\r\n  title: string;\r\n  modal: boolean;\r\n  onGoBack?: () => void;\r\n  progress: SceneProgress;\r\n  styleInterpolator: StackHeaderStyleInterpolator;\r\n};\r\n\r\nexport default function HeaderSegment(props: Props) {\r\n  const [leftLabelLayout, setLeftLabelLayout] = React.useState<\r\n    Layout | undefined\r\n  >(undefined);\r\n\r\n  const [titleLayout, setTitleLayout] = React.useState<Layout | undefined>(\r\n    undefined\r\n  );\r\n\r\n  const handleTitleLayout = (e: LayoutChangeEvent) => {\r\n    const { height, width } = e.nativeEvent.layout;\r\n\r\n    setTitleLayout((titleLayout) => {\r\n      if (\r\n        titleLayout &&\r\n        height === titleLayout.height &&\r\n        width === titleLayout.width\r\n      ) {\r\n        return titleLayout;\r\n      }\r\n\r\n      return { height, width };\r\n    });\r\n  };\r\n\r\n  const handleLeftLabelLayout = (e: LayoutChangeEvent) => {\r\n    const { height, width } = e.nativeEvent.layout;\r\n\r\n    if (\r\n      leftLabelLayout &&\r\n      height === leftLabelLayout.height &&\r\n      width === leftLabelLayout.width\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setLeftLabelLayout({ height, width });\r\n  };\r\n\r\n  const getInterpolatedStyle = memoize(\r\n    (\r\n      styleInterpolator: StackHeaderStyleInterpolator,\r\n      layout: Layout,\r\n      current: Animated.AnimatedInterpolation,\r\n      next: Animated.AnimatedInterpolation | undefined,\r\n      titleLayout: Layout | undefined,\r\n      leftLabelLayout: Layout | undefined,\r\n      headerHeight: number\r\n    ) =>\r\n      styleInterpolator({\r\n        current: { progress: current },\r\n        next: next && { progress: next },\r\n        layouts: {\r\n          header: {\r\n            height: headerHeight,\r\n            width: layout.width,\r\n          },\r\n          screen: layout,\r\n          title: titleLayout,\r\n          leftLabel: leftLabelLayout,\r\n        },\r\n      })\r\n  );\r\n\r\n  const {\r\n    progress,\r\n    layout,\r\n    modal,\r\n    onGoBack,\r\n    headerTitle: title,\r\n    headerLeft: left = onGoBack\r\n      ? (props: HeaderBackButtonProps) => <HeaderBackButton {...props} />\r\n      : undefined,\r\n    headerRight: right,\r\n    headerBackImage,\r\n    headerBackTitle,\r\n    headerBackTitleVisible = Platform.OS === 'ios',\r\n    headerTruncatedBackTitle,\r\n    headerBackAccessibilityLabel,\r\n    headerBackTestID,\r\n    headerBackAllowFontScaling,\r\n    headerBackTitleStyle,\r\n    headerTitleContainerStyle,\r\n    headerLeftContainerStyle,\r\n    headerRightContainerStyle,\r\n    headerBackgroundContainerStyle,\r\n    headerStyle: customHeaderStyle,\r\n    headerStatusBarHeight,\r\n    styleInterpolator,\r\n    ...rest\r\n  } = props;\r\n\r\n  const defaultHeight = getDefaultHeaderHeight(\r\n    layout,\r\n    modal,\r\n    headerStatusBarHeight\r\n  );\r\n\r\n  const { height = defaultHeight } = StyleSheet.flatten(\r\n    customHeaderStyle || {}\r\n  ) as ViewStyle;\r\n\r\n  const {\r\n    titleStyle,\r\n    leftButtonStyle,\r\n    leftLabelStyle,\r\n    rightButtonStyle,\r\n    backgroundStyle,\r\n  } = getInterpolatedStyle(\r\n    styleInterpolator,\r\n    layout,\r\n    progress.current,\r\n    progress.next,\r\n    titleLayout,\r\n    headerBackTitle ? leftLabelLayout : undefined,\r\n    typeof height === 'number' ? height : defaultHeight\r\n  );\r\n\r\n  const headerLeft: StackHeaderOptions['headerLeft'] = left\r\n    ? (props) =>\r\n        left({\r\n          ...props,\r\n          backImage: headerBackImage,\r\n          accessibilityLabel: headerBackAccessibilityLabel,\r\n          testID: headerBackTestID,\r\n          allowFontScaling: headerBackAllowFontScaling,\r\n          onPress: onGoBack,\r\n          label: headerBackTitle,\r\n          truncatedLabel: headerTruncatedBackTitle,\r\n          labelStyle: [leftLabelStyle, headerBackTitleStyle],\r\n          onLabelLayout: handleLeftLabelLayout,\r\n          screenLayout: layout,\r\n          titleLayout,\r\n          canGoBack: Boolean(onGoBack),\r\n        })\r\n    : undefined;\r\n\r\n  const headerRight: StackHeaderOptions['headerRight'] = right\r\n    ? (props) =>\r\n        right({\r\n          ...props,\r\n          canGoBack: Boolean(onGoBack),\r\n        })\r\n    : undefined;\r\n\r\n  const headerTitle: StackHeaderOptions['headerTitle'] =\r\n    typeof title !== 'function'\r\n      ? (props) => <HeaderTitle {...props} onLayout={handleTitleLayout} />\r\n      : (props) => title({ ...props, onLayout: handleTitleLayout });\r\n\r\n  return (\r\n    <Header\r\n      modal={modal}\r\n      layout={layout}\r\n      headerTitle={headerTitle}\r\n      headerLeft={headerLeft}\r\n      headerLeftLabelVisible={headerBackTitleVisible}\r\n      headerRight={headerRight}\r\n      headerTitleContainerStyle={[titleStyle, headerTitleContainerStyle]}\r\n      headerLeftContainerStyle={[leftButtonStyle, headerLeftContainerStyle]}\r\n      headerRightContainerStyle={[rightButtonStyle, headerRightContainerStyle]}\r\n      headerBackgroundContainerStyle={[\r\n        backgroundStyle,\r\n        headerBackgroundContainerStyle,\r\n      ]}\r\n      headerStyle={customHeaderStyle}\r\n      headerStatusBarHeight={headerStatusBarHeight}\r\n      {...rest}\r\n    />\r\n  );\r\n}\r\n"],"mappings":"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"}